# Muse ‚Äî Powered by Molapo Creative Hub ‚Äî Product Requirements Document (PRD)

This PRD defines the functional features, user-facing content, and system expectations for the **Muse** platform. It aligns with the current React Native (Expo) codebase and Supabase backend, highlighting both existing capabilities and required extensions.

---

## 1. Core App Sections

The application contains five primary user-facing domains:

### **1.1 Shop (Implemented)**

Two marketplace contexts:
* **Molapo Mall Marketplace** ‚Äî products from Molapo Crossing vendors.
* **Indie Marketplace** ‚Äî products from independent creators and artisans.

**Current Status**:
* ‚úÖ `malls` table exists (Physical vs Online).
* ‚úÖ `shops` and `products` tables exist.
* ‚úÖ Mall switching logic implemented in `shop-store.ts`.

**Required Functionality**:
* Product cards & details (Implemented).
* Cart & Checkout (Implemented with Stripe).
* Vendor profiles (Implemented).
* **Gap**: "Dynamic switching" is implemented but needs UI polish in `ShopsScreen`.

---

### **1.2 Services (Implemented)**

Booking interface for in-mall and creative services.

**Current Status**:
* ‚úÖ **Migrated to FDD**: `src/features/services/`.
* ‚úÖ **Neobrutalist Design**: Applied to all screens and modals.
* ‚úÖ **Routing**: Modals render correctly over tab bar.
* ‚úÖ `service`, `service_provider`, `service_booking` tables exist.
* ‚úÖ `appointments` table exists for legacy support.

**Required Functionality**:
* Service listing & details (Implemented).
* Time-slot booking (Implemented via Neobrutalist Modal).
* Provider profiles (Implemented).

---

### **1.3 Events (Partially Implemented)**

Platform for discovering and purchasing tickets.

**Current Status**:
* ‚úÖ `events` and `event_venue` tables exist.
* ‚úÖ Events tab exists in navigation.

**Required Functionality**:
* Event listings (Implemented).
* Ticket purchase (Implemented via `EventBookingModal`).
* **Gap**: "Challenges Hub" needs to be fully integrated (see Section 2).

---

### **1.4 Orders (Implemented)**

Tracking system for all purchases and bookings.

**Current Status**:
* ‚úÖ **Migrated to FDD**: `src/features/orders/`.
* ‚úÖ **Neobrutalist Design**: Applied to Order Details screen.
* ‚úÖ `order`, `order_item`, `delivery_orders` tables exist.
* ‚úÖ Orders tab exists.

**Required Functionality**:
* Order history (Implemented).
* Delivery tracking (Implemented).
* **Gap**: "Collection QR code" needs implementation.

---

### **1.5 Profile (Partially Implemented)**

User identity and preferences area.

**Current Status**:
* ‚úÖ Basic profile UI exists.
* ‚úÖ Auth provider implemented.

**Required Functionality**:
* User details (Implemented).
* **Gap**: "Subscription status (Molapo+)", "Gem balance", and "Challenge entries" need database extensions.

---

## 2. Challenges Hub (New Feature)

A brand-driven creative participation arena.

**Current Status**:
* üöß Frontend scaffolded (`challenges.tsx`, `ChallengeCard`).
* ‚ùå **Missing Database Tables**: `challenges`, `challenge_submissions`.

### **2.1 Structure of a Challenge**
* **Schema Requirements**:
    * `challenges` table: title, brand_id, brief, platform, hashtags, reward, dates.
    * `challenge_submissions` table: user_id, challenge_id, content_url, status, engagement_stats.

### **2.2 User Flow**
1. Display brief (Frontend ready).
2. Entry button (Needs logic).
3. Content creation (Needs AI integration).
4. Submission (Needs backend endpoint).

### **2.3 AI Content Tools**
* **Integration**: Use Vercel AI SDK + Google Gemini (already configured for Virtual Try-On).
* **Cost**: Deduct Gems (needs Wallet system).

---

## 3. Consumables (Gems) & Subscriptions (New Feature)

### **3.1 Gems System**
* **Purpose**: Challenge fees, AI generation, Vouchers.
* **Implementation**:
    * Need `user_wallets` table in Supabase.
    * Need `transactions` table to log spending/earning.

### **3.2 Subscriptions (Molapo+ / Premium)**
* **Tiers**:
    1. **Molapo+**: Monthly gems, discounts.
    2. **Premium**: Higher gems, free delivery, AI credits.
* **Implementation**:
    * Need `user_subscriptions` table.
    * Integration with RevenueCat or Stripe Subscriptions.

---

## 4. Mobility & Delivery (Future Phase)

### **4.1 Rides**
* **Status**: ‚ùå Not started.
* **Requirement**: Ride request UI, Driver matching.

### **4.2 Deliveries**
* **Status**: ‚úÖ `delivery_orders` table exists.
* **Requirement**: Driver app/interface (separate from consumer app).

---

## 5. Database Schema Extensions Required

To support the full "Muse" vision, the following schema updates are needed:

```sql
-- Challenges
create table challenges (
  id bigint generated by default as identity primary key,
  title text not null,
  brand_name text not null,
  description text not null,
  reward text,
  deadline timestamp with time zone,
  image_url text,
  requirements text[]
);

create table challenge_submissions (
  id bigint generated by default as identity primary key,
  challenge_id bigint references challenges(id),
  user_id uuid references auth.users(id),
  content_url text not null,
  status text default 'pending'
);

-- Wallet & Gems
create table user_wallets (
  user_id uuid references auth.users(id) primary key,
  gem_balance integer default 0,
  updated_at timestamp with time zone default now()
);

-- Subscriptions
create table user_subscriptions (
  user_id uuid references auth.users(id) primary key,
  tier text check (tier in ('free', 'plus', 'premium')),
  expires_at timestamp with time zone
);
```

---

## 6. System Constraints

* **Backend**: Supabase (PostgreSQL).
* **Frontend**: React Native (Expo).
* **AI**: Vercel AI SDK (Google Gemini).
* **Payments**: Stripe.
* **UGC**: Hosted externally (TikTok/IG) or in Supabase Storage (for direct uploads).

---

**This PRD serves as the roadmap for evolving the current `rn-shop` codebase into the full "Muse" platform.**
